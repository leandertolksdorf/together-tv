(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{16:function(e,t,n){e.exports={backlink:"Subpage_backlink__1jT4J"}},2:function(e,t,n){e.exports={app:"App_app__1kX79",playerWrapper:"App_playerWrapper__1sB4G",player:"App_player__1wNcv",form:"App_form__30Y9M",sources:"App_sources__Tea2d",reactPlayer:"App_reactPlayer__2C7T5",progressBarWrapper:"App_progressBarWrapper__3rUGj",progressBar:"App_progressBar__3Ro_O",control:"App_control__1mvlH",playControl:"App_playControl__1TkDw",playButton:"App_playButton__38Hm1",fullscreenButton:"App_fullscreenButton__1gL00",links:"App_links__h6CZe",hidden:"App_hidden__3ofBD",buttons:"App_buttons__32eX7",button:"App_button__13pio"}},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(14),a=n.n(s),o=n(6),i=n(3),l=n(15),d=n.n(l),p=n(2),u=n.n(p),j=n(9),b=n.n(j),m=n(0);var h=function(e){var t=e.href,n=e.onClick,r=e.children;console.log(t);var c=void 0!==t?Object(m.jsx)("a",{className:b.a.inner,href:t,children:r}):Object(m.jsx)("div",{className:b.a.inner,onClick:n,children:r});return Object(m.jsx)("div",{className:b.a.button,children:c})};var f=function(e){var t=e.id,n=Object(r.useState)(null),c=Object(i.a)(n,2),s=c[0],a=c[1],l=Object(r.useState)(""),p=Object(i.a)(l,2),j=p[0],b=p[1],f=Object(r.useState)(!1),O=Object(i.a)(f,2),x=O[0],_=O[1],g=Object(r.useRef)(),y=Object(r.useState)(),v=Object(i.a)(y,2),k=v[0],w=v[1],N=Object(r.useState)(0),S=Object(i.a)(N,2),A=S[0],B=S[1],I=Object(r.useState)(!1),T=Object(i.a)(I,2),C=T[0],J=T[1];return Object(r.useEffect)((function(){var e="wss://"+window.location.hostname+":"+window.location.port,n=new WebSocket(e);window.onbeforeunload=function(){n.onclose=function(){},n.close()},n.onopen=function(){console.log("opened"),n.send(JSON.stringify({command:"connected",groupId:t}))},n.onmessage=function(e){var t=JSON.parse(e.data);switch(t.command){case"media":w(t.url);break;case"play":g.current.seekTo(t.time),J(!0);break;case"pause":J(!1),g.current.seekTo(t.time);break;case"seek":g.current.seekTo(t.time)}},a(n)}),[t]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:u.a.app,style:{animation:"fadeIn .5s ease-in-out"},children:[Object(m.jsxs)("form",{id:"media-source",className:u.a.form,onSubmit:function(e){e&&e.preventDefault();var n=JSON.stringify({command:"media",url:j,groupId:t});s.send(n)},children:[Object(m.jsx)("input",{type:"text",placeholder:"Enter a source to play.",value:j,onChange:function(e){return b(e.target.value)}}),Object(m.jsx)("span",{className:u.a.sources,children:"YouTube | Vimeo | Dailymotion | Facebook | Mixcloud | Soundcloud | Twitch | Streamable | Video files | Audio files ..."})]}),Object(m.jsxs)("div",{id:u.a.playerWrapper,children:[Object(m.jsx)("div",{className:u.a.player,children:Object(m.jsx)(d.a,{className:u.a.reactPlayer,ref:g,url:k,playing:C,onReady:function(){},onProgress:function(e){var n=e.played;B(n);var r=JSON.stringify({command:"progress",time:n,groupId:t});s.send(r)},progressInterval:500,width:"100%",height:"100%"})}),Object(m.jsxs)("div",{className:u.a.control,children:[Object(m.jsx)("div",{className:u.a.progressBarWrapper,onClick:function(e){var n=e.nativeEvent.offsetX/e.target.offsetWidth,r=g.current.getDuration(),c=JSON.stringify({command:"seek",time:n*r,groupId:t});console.log(c,r,n),s.send(c)},children:Object(m.jsx)("div",{className:u.a.progressBar,style:{width:String(100*A)+"%"}})}),Object(m.jsxs)("div",{className:u.a.playControl,children:[Object(m.jsx)("img",{alt:"play",className:u.a.playButton,onClick:function(){return C?function(){var e=JSON.stringify({command:"pause",time:g.current.getCurrentTime(),groupId:t});s.send(e)}():function(){var e=JSON.stringify({command:"play",time:g.current.getCurrentTime(),groupId:t});s.send(e)}()},src:C?"/pause.png":"/play.png"}),Object(m.jsx)("img",{alt:"pause",className:u.a.fullscreenButton,onClick:function(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.getElementById(u.a.playerWrapper).requestFullscreen()},src:"/fullscreen.png"})]})]})]}),Object(m.jsxs)("div",{className:u.a.buttons,children:[Object(m.jsxs)(h,{onClick:function(){var e=document.getElementById("invite-link");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),_(!0)},children:[x?"\u2705":"\ud83d\ude03","\xa0 Copy invite link"]}),Object(m.jsx)(h,{href:"/room/",children:"\ud83c\udfe0\xa0New room"})]})]}),Object(m.jsx)("input",{className:u.a.hidden,readOnly:!0,type:"text",value:window.location,id:"invite-link"}),Object(m.jsxs)("div",{className:u.a.links,children:[Object(m.jsx)(o.a,{href:"/imprint",children:"Imprint"}),Object(m.jsx)(o.a,{href:"/about",children:"About"}),Object(m.jsx)(o.a,{href:"#",onClick:function(){var e=JSON.stringify({command:"media",url:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",groupId:t});s.send(e),e=JSON.stringify({command:"play",time:0,groupId:t}),s.send(e)},children:"Free Bitcoin"})]})]})},O=n(16),x=n.n(O);var _=function(e){var t=e.children;return Object(m.jsxs)("div",{className:x.a.wrapper,style:{animation:"fadeIn .5s ease-in-out"},children:[Object(m.jsx)(h,{onClick:function(){return window.history.back()},children:"\ud83c\udf7f\xa0Go back"}),t]})};var g=function(){return Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.c,{path:"/imprint",children:Object(m.jsxs)(_,{children:[Object(m.jsx)("h1",{children:"Imprint"}),Object(m.jsxs)("p",{children:["Leander Tolksdorf",Object(m.jsx)("br",{}),"Onckenstr. 15",Object(m.jsx)("br",{}),"12435 Berlin",Object(m.jsx)("br",{}),"Germany"]}),Object(m.jsx)("p",{children:"admin@leander-tolksdorf.de"})]})}),Object(m.jsx)(o.c,{path:"/about",children:Object(m.jsxs)(_,{children:[Object(m.jsx)("h1",{children:"About this project"}),Object(m.jsx)("p",{children:"TogetherTV was built for fun and educational purposes."}),Object(m.jsxs)("p",{children:["The app uses ",Object(m.jsx)("a",{href:"https://expressjs.com/",children:"ExpressJS"})," and ",Object(m.jsx)("a",{href:"https://developer.mozilla.org/de/docs/Web/API/WebSockets_API",children:"WebSockets"})," for the backend and ",Object(m.jsx)("a",{href:"https://reactjs.org/",children:"React"})," for the frontend. TogetherTV is open source. The code is available and open for contribution on GitHub."]}),Object(m.jsx)("h1",{children:"About the author"}),Object(m.jsxs)("p",{children:["I'm Leander Tolksdorf, a web developer from Berlin, Germany.",Object(m.jsx)("br",{}),"You can visit my website on ",Object(m.jsx)("a",{href:"https://farbig.media",children:"farbig | media"}),"."]})]})}),Object(m.jsx)(o.c,{path:"/room/:id",children:function(e){return Object(m.jsx)(f,{id:e.id})}}),Object(m.jsx)(o.c,{children:Object(m.jsx)(o.b,{to:"/room/".concat(Math.random().toString(36).substr(2,12))})})]})};n(44);a.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(g,{})}),document.getElementById("root"))},9:function(e,t,n){e.exports={button:"Button_button__3QF_k",inner:"Button_inner__3Quww"}}},[[45,1,2]]]);
//# sourceMappingURL=main.47a36d4d.chunk.js.map